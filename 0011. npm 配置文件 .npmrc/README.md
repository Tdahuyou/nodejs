# [0011. npm é…ç½®æ–‡ä»¶ .npmrc](https://github.com/Tdahuyou/nodejs/tree/main/0011.%20npm%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20.npmrc)

## ğŸ“ npmrc å…¨ç§°

npmrc å…¨ç§° node package manager runtime configuration fileã€‚

.npmrc æ–‡ä»¶ï¼Œè¡¨ç¤º node åŒ…ç®¡ç†å™¨çš„è¿è¡Œæ—¶é…ç½®æ–‡ä»¶ã€‚

# ğŸ¤– AI

## ğŸ¤– è¯·ä»‹ç»ä¸€ä¸‹ .npmrc æ–‡ä»¶

`.npmrc` æ–‡ä»¶æ˜¯ npm çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå­˜å‚¨ npm çš„å„ç§é…ç½®é€‰é¡¹ã€‚è¿™ä¸ªæ–‡ä»¶å¯ä»¥å­˜åœ¨äºå¤šä¸ªä½ç½®ï¼Œæ¯ä¸ªä½ç½®çš„ä¼˜å…ˆçº§ä¸åŒï¼Œå…·ä½“å¦‚ä¸‹ï¼š

1. **é¡¹ç›®çº§åˆ«çš„ `.npmrc`**:
   - ä½äºé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ã€‚
   - åªå¯¹å½“å‰é¡¹ç›®æœ‰æ•ˆã€‚
   - é€šå¸¸ç”¨äºè®¾ç½®ç‰¹å®šäºé¡¹ç›®çš„é…ç½®ï¼Œä¾‹å¦‚ç§æœ‰ä»“åº“çš„è®¤è¯ä¿¡æ¯ã€ä»£ç†è®¾ç½®ç­‰ã€‚

2. **ç”¨æˆ·çº§åˆ«çš„ `.npmrc`**:
   - ä½äºç”¨æˆ·çš„ä¸»ç›®å½•ä¸‹ï¼ˆä¾‹å¦‚ `C:\Users\DELL\.npmrc` æˆ– `~/.npmrc`ï¼‰ã€‚
   - å¯¹è¯¥ç”¨æˆ·çš„æ‰€æœ‰ npm æ“ä½œç”Ÿæ•ˆã€‚
   - é€šå¸¸ç”¨äºè®¾ç½®å…¨å±€çš„ npm é…ç½®ï¼Œä¾‹å¦‚ registryã€ä»£ç†è®¾ç½®ç­‰ã€‚

3. **å…¨å±€çº§åˆ«çš„ `.npmrc`**:
   - ä½äº npm çš„å…¨å±€é…ç½®ç›®å½•ä¸‹ï¼ˆä¾‹å¦‚ `C:\Users\DELL\AppData\Roaming\npm\etc\npmrc` æˆ– `/usr/local/etc/npmrc`ï¼‰ã€‚
   - å¯¹æ‰€æœ‰ç”¨æˆ·å’Œæ‰€æœ‰é¡¹ç›®ç”Ÿæ•ˆã€‚
   - é€šå¸¸ç”±ç³»ç»Ÿç®¡ç†å‘˜è®¾ç½®ï¼Œç”¨äºç®¡ç†å…¨å±€çš„ npm é…ç½®ã€‚

### å¸¸è§é…ç½®é¡¹

ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ `.npmrc` é…ç½®é¡¹åŠå…¶ç”¨é€”ï¼š

- **registry**:
  - è®¾ç½® npm åŒ…çš„æ³¨å†Œè¡¨åœ°å€ã€‚
  - ä¾‹å¦‚ï¼š`registry=https://registry.npmjs.org/`

- **proxy** å’Œ **https-proxy**:
  - è®¾ç½® HTTP å’Œ HTTPS ä»£ç†æœåŠ¡å™¨ã€‚
  - ä¾‹å¦‚ï¼š
    ```ini
    proxy=http://your-proxy-url:port
    https-proxy=http://your-proxy-url:port
    ```

- **strict-ssl**:
  - æ§åˆ¶æ˜¯å¦å¼ºåˆ¶ä½¿ç”¨ SSL è¯ä¹¦è¿›è¡ŒéªŒè¯ã€‚
  - ä¾‹å¦‚ï¼š`strict-ssl=false`

- **save-exact**:
  - æ§åˆ¶ `npm install --save` æ˜¯å¦ä¿å­˜ç²¾ç¡®çš„ç‰ˆæœ¬å·ã€‚
  - ä¾‹å¦‚ï¼š`save-exact=true`

- **engine-strict**:
  - æ§åˆ¶æ˜¯å¦ä¸¥æ ¼æ£€æŸ¥ Node.js ç‰ˆæœ¬ã€‚
  - ä¾‹å¦‚ï¼š`engine-strict=true`

- **auth** å’Œ **_authToken**:
  - ç”¨äºè®¾ç½®ç§æœ‰ä»“åº“çš„è®¤è¯ä¿¡æ¯ã€‚
  - ä¾‹å¦‚ï¼š
    ```ini
    //registry.npmjs.org/:_authToken=your-auth-token
    ```

- **always-auth**:
  - æ§åˆ¶æ˜¯å¦æ€»æ˜¯å‘é€è®¤è¯ä¿¡æ¯ã€‚
  - ä¾‹å¦‚ï¼š`always-auth=true`

- **cache**:
  - è®¾ç½® npm ç¼“å­˜ç›®å½•çš„ä½ç½®ã€‚
  - ä¾‹å¦‚ï¼š`cache=C:\path\to\custom\cache`

### ç¤ºä¾‹

#### é¡¹ç›®çº§åˆ«çš„ `.npmrc`
å‡è®¾ä½ åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ª `.npmrc` æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```ini
# ä½¿ç”¨æ·˜å®é•œåƒ
registry=https://registry.npm.taobao.org/

# è®¾ç½®ä»£ç†
proxy=http://your-proxy-url:port
https-proxy=http://your-proxy-url:port

# ä¸å¼ºåˆ¶ä½¿ç”¨ SSL è¯ä¹¦
strict-ssl=false
```

#### ç”¨æˆ·çº§åˆ«çš„ `.npmrc`
å‡è®¾åœ¨ä½ çš„ç”¨æˆ·ä¸»ç›®å½•ä¸‹æœ‰ä¸€ä¸ª `.npmrc` æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```ini
# å…¨å±€ä½¿ç”¨æ·˜å®é•œåƒ
registry=https://registry.npm.taobao.org/

# è®¾ç½®å…¨å±€ä»£ç†
proxy=http://your-proxy-url:port
https-proxy=http://your-proxy-url:port

# ä¿å­˜ç²¾ç¡®çš„ç‰ˆæœ¬å·
save-exact=true
```

#### å…¨å±€çº§åˆ«çš„ `.npmrc`
å‡è®¾åœ¨å…¨å±€é…ç½®ç›®å½•ä¸‹æœ‰ä¸€ä¸ª `.npmrc` æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```ini
# å…¨å±€ä½¿ç”¨é»˜è®¤çš„ npm æ³¨å†Œè¡¨
registry=https://registry.npmjs.org/

# è®¾ç½®å…¨å±€ä»£ç†
proxy=http://your-proxy-url:port
https-proxy=http://your-proxy-url:port

# ä¸¥æ ¼æ£€æŸ¥ Node.js ç‰ˆæœ¬
engine-strict=true
```

### ä¼˜å…ˆçº§

é…ç½®é¡¹çš„ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ä¾æ¬¡ä¸ºï¼š

1. å‘½ä»¤è¡Œå‚æ•°
2. ç¯å¢ƒå˜é‡
3. é¡¹ç›®çº§åˆ«çš„ `.npmrc`
4. ç”¨æˆ·çº§åˆ«çš„ `.npmrc`
5. å…¨å±€çº§åˆ«çš„ `.npmrc`
6. npm å†…ç½®çš„é»˜è®¤å€¼

### æŸ¥çœ‹å½“å‰é…ç½®

ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰çš„ npm é…ç½®ï¼š

```sh
npm config list
```

è¿™å°†åˆ—å‡ºæ‰€æœ‰å½“å‰ç”Ÿæ•ˆçš„é…ç½®é¡¹åŠå…¶æ¥æºã€‚

### æ€»ç»“

`.npmrc` æ–‡ä»¶æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ è‡ªå®šä¹‰å’Œç®¡ç† npm çš„è¡Œä¸ºã€‚é€šè¿‡æ­£ç¡®é…ç½® `.npmrc` æ–‡ä»¶ï¼Œä½ å¯ä»¥ä¼˜åŒ–å¼€å‘ç¯å¢ƒï¼Œè§£å†³ç½‘ç»œé—®é¢˜ï¼Œå¹¶æé«˜å¼€å‘æ•ˆç‡ã€‚å¦‚æœä½ é‡åˆ°é…ç½®é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥è¿™äº›æ–‡ä»¶æ¥æ‰¾åˆ°å¹¶è§£å†³é—®é¢˜ã€‚

## ğŸ¤– rc æ˜¯ä»€ä¹ˆå•è¯çš„ç¼©å†™ï¼Ÿ

`rc` æ˜¯ "run commands" æˆ– "runtime configuration" çš„ç¼©å†™ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºé…ç½®æ–‡ä»¶ã€‚åœ¨ Unix å’Œç±» Unix ç³»ç»Ÿï¼ˆå¦‚ Linux å’Œ macOSï¼‰ä¸­ï¼Œè®¸å¤šåº”ç”¨ç¨‹åºä½¿ç”¨ä»¥ `.rc` ç»“å°¾çš„æ–‡ä»¶æ¥å­˜å‚¨é…ç½®ä¿¡æ¯ã€‚è¿™ç§å‘½åçº¦å®šå·²ç»å¹¿æ³›åº”ç”¨äºå„ç§å·¥å…·å’Œè½¯ä»¶ä¸­ã€‚

### å¸¸è§çš„ `.rc` æ–‡ä»¶
- **.bashrc**ï¼šBash shell çš„é…ç½®æ–‡ä»¶ã€‚
- **.vimrc**ï¼šVim æ–‡æœ¬ç¼–è¾‘å™¨çš„é…ç½®æ–‡ä»¶ã€‚
- **.npmrc**ï¼šnpm çš„é…ç½®æ–‡ä»¶ã€‚
- **.gitconfig** æˆ– `.gitrc`ï¼šGit çš„é…ç½®æ–‡ä»¶ã€‚
- **.zshrc**ï¼šZsh shell çš„é…ç½®æ–‡ä»¶ã€‚

### ç”¨é€”
è¿™äº›é…ç½®æ–‡ä»¶é€šå¸¸åŒ…å«å¯åŠ¨æ—¶éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€ç¯å¢ƒå˜é‡è®¾ç½®ã€åˆ«åå®šä¹‰ç­‰ã€‚ä¾‹å¦‚ï¼š

- **.bashrc** å¯èƒ½åŒ…å«ç”¨æˆ·è‡ªå®šä¹‰çš„ shell åˆ«åã€å‡½æ•°å’Œç¯å¢ƒå˜é‡ã€‚
- **.vimrc** å¯èƒ½åŒ…å« Vim çš„æ’ä»¶é…ç½®ã€å¿«æ·é”®æ˜ å°„å’Œç¼–è¾‘å™¨è®¾ç½®ã€‚
- **.npmrc** åŒ…å« npm çš„æ³¨å†Œè¡¨åœ°å€ã€ä»£ç†è®¾ç½®ã€è®¤è¯ä¿¡æ¯ç­‰ã€‚

### å…·ä½“åˆ° `.npmrc`
å¯¹äº `.npmrc` æ–‡ä»¶ï¼Œ`rc` ä»£è¡¨ "runtime configuration"ï¼Œå³è¿è¡Œæ—¶é…ç½®ã€‚è¿™ä¸ªæ–‡ä»¶ç”¨äºå­˜å‚¨ npm çš„å„ç§é…ç½®é€‰é¡¹ï¼Œä»¥ä¾¿è‡ªå®šä¹‰ npm çš„è¡Œä¸ºï¼Œå¦‚è®¾ç½®æ³¨å†Œè¡¨åœ°å€ã€ä»£ç†æœåŠ¡å™¨ã€è®¤è¯ä¿¡æ¯ç­‰ã€‚

### æ€»ç»“
`rc` æ˜¯ "run commands" æˆ– "runtime configuration" çš„ç¼©å†™ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºé…ç½®æ–‡ä»¶ã€‚`.npmrc` æ–‡ä»¶æ˜¯ npm çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå­˜å‚¨å’Œç®¡ç† npm çš„å„ç§é…ç½®é€‰é¡¹ã€‚